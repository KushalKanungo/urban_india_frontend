<span #cart class="cart-button" id="cart">
  <i
    #targetEl
    class="bi bi-cart"
    (click)="isCardSideBarVisible = !isCardSideBarVisible"
  ></i>
  <span class="cart-size">
    <span> {{ cartService.cartItems.length }} </span>
  </span>
</span>

<p-sidebar
  [(visible)]="isCardSideBarVisible"
  styleClass="cart-sidebar"
  appendTo="body"
  position="right"
  [style.width]="'28vw'"
  [blockScroll]="true"
  [showCloseIcon]="true"
  [modal]="true"
>
<ng-template pTemplate="header">
  <p class="fs-5 fw-4">Cart Price {{ cartService.cartPrice | currency : "INR" }}</p>
</ng-template>
  <app-business-service-card-small
    [showDeleteIcon]="true"
    *ngFor="let cartItem of cartService.cartItems"
    [businessServiceData]="cartItem.businessService"
    [cardConfig]="cardConfig"
    [cartItem]="cartItem"
  >
  </app-business-service-card-small>
  
  
  <ng-template pTemplate="footer" >
    <p>Coupons</p>
    
    <p-carousel [value]="cartService.coupons" [numVisible]="2" [showNavigators]="false" [numScroll]="2" [circular]="false">
      <ng-template let-coupon pTemplate="item">
        <app-coupon-card (click)="selectCoupon(coupon)" dateFormat="dd M y" [selected]="cartService.selectedCoupon?.id == coupon.id" [coupon]="coupon"> </app-coupon-card>
      </ng-template>
  </p-carousel>

    <div  class="d-flex justify-content-between " >
      <div class="px-2 mb-2">
        <span class="fs-6">Final Price</span>
        <br>
        <span class="fs-6">
          <span [style.text-decoration]="'line-through'" *ngIf="cartService.selectedCoupon">{{ cartService.cartPrice | currency:'INR':'symbol-narrow' }}</span>
          <span class="ps-2" *ngIf="cartService.selectedCoupon" >{{ cartService.cartPrice - cartService.cartPrice * cartService.selectedCoupon.percent/100 | currency:'INR':'symbol-narrow' }}</span>
          <span *ngIf="!cartService.selectedCoupon">{{ cartService.cartPrice | currency:'INR':'symbol-narrow' }}</span>
        </span>
      </div>
      <p-button> Place Order </p-button>
    </div>
  </ng-template>
</p-sidebar>
